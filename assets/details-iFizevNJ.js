import{j as T,B as me,ai as Ee,N as Ae,K as Ke}from"./chakra-C_7_uw7b.js";import{c as Ie,w as Pe,x as Oe,y as ve,e as ge,a4 as Ge,a5 as Qe,L as Ze,k as Ue,o as Je,D as Ne,aK as We,aN as et,aQ as tt,aR as rt,aS as nt}from"./index-B4jp-iTk.js";import{u as Le,d as le,r as ot}from"./react-YtWR-Zuw.js";import{u as Ve}from"./useEvent-qDAdtkIH.js";import{m as it}from"./misc-nodes-BtR9ywMA.js";import{s as st}from"./master-manager-BmEPk8qa.js";function at(){const{t:C}=Le(),N=Ie(),O=le.useCallback(()=>{N(Pe()),N(Oe()),N(ve(m.current.export()))},[N,Pe,Oe,ve]),{activeSubscriptions:z}=ge(g=>g.account),{selected:c,count:{parallel:f}}=ge(g=>g.runtime),[s]=c,m=le.useRef(window.graph),L=g=>{const j=Math.min(Math.max(g,-10),10);m.current.hasNode(s)&&m.current.setNodeAttribute(s,"zIndex",j),m.current.hasEdge(s)&&m.current.setEdgeAttribute(s,"zIndex",j),O()},V=(g,j)=>{let v=-1;if(g){const A=m.current.getEdgeAttributes(s),[W,G]=m.current.extremities(s);v=Je(m.current,A.type,W,G,j)}w(v)},w=g=>{m.current.setEdgeAttribute(s,"parallelIndex",g),N(Oe()),N(ve(m.current.export()))},I=[];if(c.size!==0)if(c.size===1){if(I.push({type:"input",label:C("panel.details.info.id"),value:s,minW:276}),I.push({type:"select",label:C("panel.details.info.zIndex"),value:s?m.current.hasNode(s)?m.current.getNodeAttribute(s,"zIndex"):m.current.hasEdge(s)?m.current.getEdgeAttribute(s,"zIndex"):0:0,options:Object.fromEntries(Array.from({length:21},(g,j)=>[j-10,(j-10).toString()])),onChange:g=>L(Number(g))}),m.current.hasEdge(s)){const g=m.current.getEdgeAttributes(s),{parallelIndex:j,type:v}=g,A=z.RMP_CLOUD?Ge:Qe,W=f>A&&j<0||v===Ze.Simple,G=f>A&&j>=0;I.push({type:"switch",label:C("panel.details.info.parallel"),isDisabled:W,isChecked:j>=0,onChange:$=>V($,g[g.type].startFrom),oneLine:!0,minW:276}),j>=0&&I.push({type:"input",label:C("panel.details.info.parallelIndex"),variant:"number",isDisabled:G,value:g.parallelIndex.toString(),onChange:$=>w(Number($)),minW:276})}}else c.size>1&&I.push({type:"input",label:C("panel.details.info.type"),value:C("panel.details.multipleSelection.title"),minW:276});return T.jsxs(me,{p:1,children:[T.jsx(Ee,{as:"h5",size:"sm",children:C("panel.details.info.title")}),T.jsx(Ue,{fields:I,minW:130})]})}function lt(){const{t:C}=Le(),N=Ie(),{selected:O}=ge(W=>W.runtime),[z]=O,c=le.useRef(window.graph),[f,s]=le.useState("undefined"),[m,L]=le.useState("undefined"),[V,w]=le.useState("undefined"),[I,g]=le.useState("undefined");le.useEffect(()=>{var W,G,$,te;if(z!=null&&z.startsWith("line")){const[ue,h]=c.current.extremities(z);if(s(ue),L(h),ue.startsWith("stn")){const S=c.current.getNodeAttribute(ue,"type");w((G=(W=c.current.getNodeAttribute(ue,S))==null?void 0:W.names.at(0))!=null?G:"undefined")}if(h.startsWith("stn")){const S=c.current.getNodeAttribute(h,"type");g((te=($=c.current.getNodeAttribute(h,S))==null?void 0:$.names.at(0))!=null?te:"undefined")}}},[O]);const j=Ve(()=>{N(Ne()),N(We(f))}),v=Ve(()=>{N(Ne()),N(We(m))}),A=[{type:"custom",label:C("panel.details.lineExtremities.source"),component:T.jsx(Ae,{ml:"auto",size:"sm",variant:"link",onClick:j,children:f}),oneLine:!0,minW:"full"},{type:"input",label:C("panel.details.lineExtremities.sourceName"),value:V,minW:"full"},{type:"custom",label:C("panel.details.lineExtremities.target"),component:T.jsx(Ae,{ml:"auto",size:"sm",variant:"link",onClick:v,children:m}),oneLine:!0,minW:"full"},{type:"input",label:C("panel.details.lineExtremities.targetName"),value:I,minW:"full"}];return T.jsxs(me,{p:1,children:[T.jsx(Ee,{as:"h5",size:"sm",children:C("panel.details.lineExtremities.title")}),T.jsx(Ue,{fields:A,minW:130})]})}var ke={exports:{}},$e;function ut(){return $e||($e=1,(()=>{var C={296:(c,f,s)=>{var m=/^\s+|\s+$/g,L=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,w=/^0o[0-7]+$/i,I=parseInt,g=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g,j=typeof self=="object"&&self&&self.Object===Object&&self,v=g||j||Function("return this")(),A=Object.prototype.toString,W=Math.max,G=Math.min,$=function(){return v.Date.now()};function te(h){var S=typeof h;return!!h&&(S=="object"||S=="function")}function ue(h){if(typeof h=="number")return h;if(function(p){return typeof p=="symbol"||function(x){return!!x&&typeof x=="object"}(p)&&A.call(p)=="[object Symbol]"}(h))return NaN;if(te(h)){var S=typeof h.valueOf=="function"?h.valueOf():h;h=te(S)?S+"":S}if(typeof h!="string")return h===0?h:+h;h=h.replace(m,"");var Z=V.test(h);return Z||w.test(h)?I(h.slice(2),Z?2:8):L.test(h)?NaN:+h}c.exports=function(h,S,Z){var p,x,Q,F,M,J,U=0,oe=!1,X=!1,ie=!0;if(typeof h!="function")throw new TypeError("Expected a function");function ce(D){var Y=p,ne=x;return p=x=void 0,U=D,F=h.apply(ne,Y)}function fe(D){var Y=D-J;return J===void 0||Y>=S||Y<0||X&&D-U>=Q}function R(){var D=$();if(fe(D))return se(D);M=setTimeout(R,function(Y){var ne=S-(Y-J);return X?G(ne,Q-(Y-U)):ne}(D))}function se(D){return M=void 0,ie&&p?ce(D):(p=x=void 0,F)}function re(){var D=$(),Y=fe(D);if(p=arguments,x=this,J=D,Y){if(M===void 0)return function(ne){return U=ne,M=setTimeout(R,S),oe?ce(ne):F}(J);if(X)return M=setTimeout(R,S),ce(J)}return M===void 0&&(M=setTimeout(R,S)),F}return S=ue(S)||0,te(Z)&&(oe=!!Z.leading,Q=(X="maxWait"in Z)?W(ue(Z.maxWait)||0,S):Q,ie="trailing"in Z?!!Z.trailing:ie),re.cancel=function(){M!==void 0&&clearTimeout(M),U=0,p=J=x=M=void 0},re.flush=function(){return M===void 0?F:se($())},re}},96:(c,f,s)=>{var m="Expected a function",L=NaN,V="[object Symbol]",w=/^\s+|\s+$/g,I=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,j=/^0o[0-7]+$/i,v=parseInt,A=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g,W=typeof self=="object"&&self&&self.Object===Object&&self,G=A||W||Function("return this")(),$=Object.prototype.toString,te=Math.max,ue=Math.min,h=function(){return G.Date.now()};function S(p){var x=typeof p;return!!p&&(x=="object"||x=="function")}function Z(p){if(typeof p=="number")return p;if(function(F){return typeof F=="symbol"||function(M){return!!M&&typeof M=="object"}(F)&&$.call(F)==V}(p))return L;if(S(p)){var x=typeof p.valueOf=="function"?p.valueOf():p;p=S(x)?x+"":x}if(typeof p!="string")return p===0?p:+p;p=p.replace(w,"");var Q=g.test(p);return Q||j.test(p)?v(p.slice(2),Q?2:8):I.test(p)?L:+p}c.exports=function(p,x,Q){var F=!0,M=!0;if(typeof p!="function")throw new TypeError(m);return S(Q)&&(F="leading"in Q?!!Q.leading:F,M="trailing"in Q?!!Q.trailing:M),function(J,U,oe){var X,ie,ce,fe,R,se,re=0,D=!1,Y=!1,ne=!0;if(typeof J!="function")throw new TypeError(m);function pe(q){var ae=X,ee=ie;return X=ie=void 0,re=q,fe=J.apply(ee,ae)}function je(q){var ae=q-se;return se===void 0||ae>=U||ae<0||Y&&q-re>=ce}function de(){var q=h();if(je(q))return we(q);R=setTimeout(de,function(ae){var ee=U-(ae-se);return Y?ue(ee,ce-(ae-re)):ee}(q))}function we(q){return R=void 0,ne&&X?pe(q):(X=ie=void 0,fe)}function ye(){var q=h(),ae=je(q);if(X=arguments,ie=this,se=q,ae){if(R===void 0)return function(ee){return re=ee,R=setTimeout(de,U),D?pe(ee):fe}(se);if(Y)return R=setTimeout(de,U),pe(se)}return R===void 0&&(R=setTimeout(de,U)),fe}return U=Z(U)||0,S(oe)&&(D=!!oe.leading,ce=(Y="maxWait"in oe)?te(Z(oe.maxWait)||0,U):ce,ne="trailing"in oe?!!oe.trailing:ne),ye.cancel=function(){R!==void 0&&clearTimeout(R),re=0,X=se=ie=R=void 0},ye.flush=function(){return R===void 0?fe:we(h())},ye}(p,x,{leading:F,maxWait:x,trailing:M})}},703:(c,f,s)=>{var m=s(414);function L(){}function V(){}V.resetWarningCache=L,c.exports=function(){function w(j,v,A,W,G,$){if($!==m){var te=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw te.name="Invariant Violation",te}}function I(){return w}w.isRequired=w;var g={array:w,bigint:w,bool:w,func:w,number:w,object:w,string:w,symbol:w,any:w,arrayOf:I,element:w,elementType:w,instanceOf:I,node:w,objectOf:I,oneOf:I,oneOfType:I,shape:I,exact:I,checkPropTypes:V,resetWarningCache:L};return g.PropTypes=g,g}},697:(c,f,s)=>{c.exports=s(703)()},414:c=>{c.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},N={};function O(c){var f=N[c];if(f!==void 0)return f.exports;var s=N[c]={exports:{}};return C[c](s,s.exports,O),s.exports}O.n=c=>{var f=c&&c.__esModule?()=>c.default:()=>c;return O.d(f,{a:f}),f},O.d=(c,f)=>{for(var s in f)O.o(f,s)&&!O.o(c,s)&&Object.defineProperty(c,s,{enumerable:!0,get:f[s]})},O.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(c){if(typeof window=="object")return window}}(),O.o=(c,f)=>Object.prototype.hasOwnProperty.call(c,f),O.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var z={};(()=>{O.r(z),O.d(z,{LazyLoadComponent:()=>ae,LazyLoadImage:()=>Ye,trackWindowScroll:()=>fe});const c=ot();var f=O.n(c),s=O(697);function m(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function L(n){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(n)}function V(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),o.push.apply(o,i)}return o}function w(n,e,o){return(e=g(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}function I(n,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,g(i.key),i)}}function g(n){var e=function(o,i){if(L(o)!=="object"||o===null)return o;var d=o[Symbol.toPrimitive];if(d!==void 0){var y=d.call(o,"string");if(L(y)!=="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return L(e)==="symbol"?e:String(e)}function j(n,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o},j(n,e)}function v(n){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(n)}var A=function(n){n.forEach(function(e){e.isIntersecting&&e.target.onVisible()})},W={},G=function(n){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&j(t,r)})(P,n);var e,o,i,d,y=(i=P,d=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=v(i);if(d){var u=v(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(l,a){if(a&&(L(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(l)}(this,t)});function P(t){var r;if(function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}(this,P),(r=y.call(this,t)).supportsObserver=!t.scrollPosition&&t.useIntersectionObserver&&m(),r.supportsObserver){var u=t.threshold;r.observer=function(l){return W[l]=W[l]||new IntersectionObserver(A,{rootMargin:l+"px"}),W[l]}(u)}return r}return e=P,o=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,r=this.placeholder.getBoundingClientRect(),u=this.placeholder.style,l=parseInt(u.getPropertyValue("margin-left"),10)||0,a=parseInt(u.getPropertyValue("margin-top"),10)||0;return{bottom:t.y+r.bottom+a,left:t.x+r.left+l,right:t.x+r.right+l,top:t.y+r.top+a}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var t=this.props,r=t.scrollPosition,u=t.threshold,l=this.getPlaceholderBoundingBox(r),a=r.y+window.innerHeight,b=r.x,_=r.x+window.innerWidth,k=r.y;return k-u<=l.bottom&&a+u>=l.top&&b-u<=l.right&&_+u>=l.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var t=this,r=this.props,u=r.className,l=r.height,a=r.placeholder,b=r.style,_=r.width;if(a&&typeof a.type!="function")return f().cloneElement(a,{ref:function(E){return t.placeholder=E}});var k=function(E){for(var H=1;H<arguments.length;H++){var B=arguments[H]!=null?arguments[H]:{};H%2?V(Object(B),!0).forEach(function(K){w(E,K,B[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(B)):V(Object(B)).forEach(function(K){Object.defineProperty(E,K,Object.getOwnPropertyDescriptor(B,K))})}return E}({display:"inline-block"},b);return _!==void 0&&(k.width=_),l!==void 0&&(k.height=l),f().createElement("span",{className:u,ref:function(E){return t.placeholder=E},style:k},a)}}],o&&I(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),P}(f().Component);G.propTypes={onVisible:s.PropTypes.func.isRequired,className:s.PropTypes.string,height:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),placeholder:s.PropTypes.element,threshold:s.PropTypes.number,useIntersectionObserver:s.PropTypes.bool,scrollPosition:s.PropTypes.shape({x:s.PropTypes.number.isRequired,y:s.PropTypes.number.isRequired}),width:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string])},G.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const $=G;var te=O(296),ue=O.n(te),h=O(96),S=O.n(h),Z=function(n){var e=getComputedStyle(n,null);return e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x")};const p=function(n){if(!(n instanceof HTMLElement))return window;for(var e=n;e&&e instanceof HTMLElement;){if(/(scroll|auto)/.test(Z(e)))return e;e=e.parentNode}return window};function x(n){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(n)}var Q=["delayMethod","delayTime"];function F(){return F=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},F.apply(this,arguments)}function M(n,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(d=function(y,P){if(x(y)!=="object"||y===null)return y;var t=y[Symbol.toPrimitive];if(t!==void 0){var r=t.call(y,"string");if(x(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(i.key),x(d)==="symbol"?d:String(d)),i)}var d}function J(n,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o},J(n,e)}function U(n,e){if(e&&(x(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oe(n)}function oe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function X(n){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(n)}var ie=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},ce=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const fe=function(n){var e=function(o){(function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),l&&J(u,l)})(r,o);var i,d,y,P,t=(y=r,P=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(u){return!1}}(),function(){var u,l=X(y);if(P){var a=X(this).constructor;u=Reflect.construct(l,arguments,a)}else u=l.apply(this,arguments);return U(this,u)});function r(u){var l;if(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}(this,r),(l=t.call(this,u)).useIntersectionObserver=u.useIntersectionObserver&&m(),l.useIntersectionObserver)return U(l);var a=l.onChangeScroll.bind(oe(l));return u.delayMethod==="debounce"?l.delayedScroll=ue()(a,u.delayTime):u.delayMethod==="throttle"&&(l.delayedScroll=S()(a,u.delayTime)),l.state={scrollPosition:{x:ie(),y:ce()}},l.baseComponentRef=f().createRef(),l}return i=r,(d=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||p(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=p(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:ie(),y:ce()}})}},{key:"render",value:function(){var u=this.props,l=(u.delayMethod,u.delayTime,function(b,_){if(b==null)return{};var k,E,H=function(K,he){if(K==null)return{};var be,xe,Be={},ze=Object.keys(K);for(xe=0;xe<ze.length;xe++)be=ze[xe],he.indexOf(be)>=0||(Be[be]=K[be]);return Be}(b,_);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(b);for(E=0;E<B.length;E++)k=B[E],_.indexOf(k)>=0||Object.prototype.propertyIsEnumerable.call(b,k)&&(H[k]=b[k])}return H}(u,Q)),a=this.useIntersectionObserver?null:this.state.scrollPosition;return f().createElement(n,F({forwardRef:this.baseComponentRef,scrollPosition:a},l))}}])&&M(i.prototype,d),Object.defineProperty(i,"prototype",{writable:!1}),r}(f().Component);return e.propTypes={delayMethod:s.PropTypes.oneOf(["debounce","throttle"]),delayTime:s.PropTypes.number,useIntersectionObserver:s.PropTypes.bool},e.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},e};function R(n){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(n)}function se(n,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(d=function(y,P){if(R(y)!=="object"||y===null)return y;var t=y[Symbol.toPrimitive];if(t!==void 0){var r=t.call(y,"string");if(R(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(i.key),R(d)==="symbol"?d:String(d)),i)}var d}function re(n,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o},re(n,e)}function D(n){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(n)}var Y=function(n){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&re(t,r)})(P,n);var e,o,i,d,y=(i=P,d=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=D(i);if(d){var u=D(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(l,a){if(a&&(R(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(l)}(this,t)});function P(t){return function(r,u){if(!(r instanceof u))throw new TypeError("Cannot call a class as a function")}(this,P),y.call(this,t)}return e=P,(o=[{key:"render",value:function(){return f().createElement($,this.props)}}])&&se(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),P}(f().Component);const ne=fe(Y);function pe(n){return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(n)}function je(n,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(d=function(y,P){if(pe(y)!=="object"||y===null)return y;var t=y[Symbol.toPrimitive];if(t!==void 0){var r=t.call(y,"string");if(pe(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}(i.key),pe(d)==="symbol"?d:String(d)),i)}var d}function de(n,e){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o},de(n,e)}function we(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ye(n){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(n)}var q=function(n){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&de(t,r)})(P,n);var e,o,i,d,y=(i=P,d=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=ye(i);if(d){var u=ye(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(l,a){if(a&&(pe(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return we(l)}(this,t)});function P(t){var r;(function(_,k){if(!(_ instanceof k))throw new TypeError("Cannot call a class as a function")})(this,P),r=y.call(this,t);var u=t.afterLoad,l=t.beforeLoad,a=t.scrollPosition,b=t.visibleByDefault;return r.state={visible:b},b&&(l(),u()),r.onVisible=r.onVisible.bind(we(r)),r.isScrollTracked=!!(a&&Number.isFinite(a.x)&&a.x>=0&&Number.isFinite(a.y)&&a.y>=0),r}return e=P,(o=[{key:"componentDidUpdate",value:function(t,r){r.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var t=this.props,r=t.className,u=t.delayMethod,l=t.delayTime,a=t.height,b=t.placeholder,_=t.scrollPosition,k=t.style,E=t.threshold,H=t.useIntersectionObserver,B=t.width;return this.isScrollTracked||H&&m()?f().createElement($,{className:r,height:a,onVisible:this.onVisible,placeholder:b,scrollPosition:_,style:k,threshold:E,useIntersectionObserver:H,width:B}):f().createElement(ne,{className:r,delayMethod:u,delayTime:l,height:a,onVisible:this.onVisible,placeholder:b,style:k,threshold:E,width:B})}}])&&je(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),P}(f().Component);q.propTypes={afterLoad:s.PropTypes.func,beforeLoad:s.PropTypes.func,useIntersectionObserver:s.PropTypes.bool,visibleByDefault:s.PropTypes.bool},q.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const ae=q;function ee(n){return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(n)}var qe=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function Ce(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),o.push.apply(o,i)}return o}function De(n){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?Ce(Object(o),!0).forEach(function(i){He(n,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ce(Object(o)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(o,i))})}return n}function He(n,e,o){return(e=Me(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}function Se(){return Se=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},Se.apply(this,arguments)}function Xe(n,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Me(i.key),i)}}function Me(n){var e=function(o,i){if(ee(o)!=="object"||o===null)return o;var d=o[Symbol.toPrimitive];if(d!==void 0){var y=d.call(o,"string");if(ee(y)!=="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return ee(e)==="symbol"?e:String(e)}function Re(n,e){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o},Re(n,e)}function Te(n){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(n)}var _e=function(n){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Re(t,r)})(P,n);var e,o,i,d,y=(i=P,d=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=Te(i);if(d){var u=Te(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(l,a){if(a&&(ee(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(l)}(this,t)});function P(t){var r;return function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,P),(r=y.call(this,t)).state={loaded:!1},r}return e=P,(o=[{key:"onImageLoad",value:function(){var t=this;return this.state.loaded?null:function(r){t.props.onLoad(r),t.props.afterLoad(),t.setState({loaded:!0})}}},{key:"getImg",value:function(){var t=this.props,r=(t.afterLoad,t.beforeLoad,t.delayMethod,t.delayTime,t.effect,t.placeholder,t.placeholderSrc,t.scrollPosition,t.threshold,t.useIntersectionObserver,t.visibleByDefault,t.wrapperClassName,t.wrapperProps,function(u,l){if(u==null)return{};var a,b,_=function(E,H){if(E==null)return{};var B,K,he={},be=Object.keys(E);for(K=0;K<be.length;K++)B=be[K],H.indexOf(B)>=0||(he[B]=E[B]);return he}(u,l);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(u);for(b=0;b<k.length;b++)a=k[b],l.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(u,a)&&(_[a]=u[a])}return _}(t,qe));return f().createElement("img",Se({},r,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var t=this.props,r=t.beforeLoad,u=t.className,l=t.delayMethod,a=t.delayTime,b=t.height,_=t.placeholder,k=t.scrollPosition,E=t.style,H=t.threshold,B=t.useIntersectionObserver,K=t.visibleByDefault,he=t.width;return f().createElement(ae,{beforeLoad:r,className:u,delayMethod:l,delayTime:a,height:b,placeholder:_,scrollPosition:k,style:E,threshold:H,useIntersectionObserver:B,visibleByDefault:K,width:he},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(t){var r=this.props,u=r.effect,l=r.height,a=r.placeholderSrc,b=r.width,_=r.wrapperClassName,k=r.wrapperProps,E=this.state.loaded,H=E?" lazy-load-image-loaded":"",B=E||!a?{}:{backgroundImage:"url(".concat(a,")"),backgroundSize:"100% 100%"};return f().createElement("span",Se({className:_+" lazy-load-image-background "+u+H,style:De(De({},B),{},{color:"transparent",display:"inline-block",height:l,width:b})},k),t)}},{key:"render",value:function(){var t=this.props,r=t.effect,u=t.placeholderSrc,l=t.visibleByDefault,a=t.wrapperClassName,b=t.wrapperProps,_=this.getLazyLoadImage();return(r||u)&&!l||a||b?this.getWrappedLazyLoadImage(_):_}}])&&Xe(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),P}(f().Component);_e.propTypes={onLoad:s.PropTypes.func,afterLoad:s.PropTypes.func,beforeLoad:s.PropTypes.func,delayMethod:s.PropTypes.string,delayTime:s.PropTypes.number,effect:s.PropTypes.string,placeholderSrc:s.PropTypes.string,threshold:s.PropTypes.number,useIntersectionObserver:s.PropTypes.bool,visibleByDefault:s.PropTypes.bool,wrapperClassName:s.PropTypes.string,wrapperProps:s.PropTypes.object},_e.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const Ye=_e})(),ke.exports=z})()),ke.exports}var ct=ut();const Fe={...st,...it},ft=()=>{var j;const C=Ie(),{selected:N}=ge(v=>v.runtime),{t:O}=Le(),[z]=N,[c,f]=le.useState(new Set);le.useEffect(()=>{f(new Set)},[z]);const s=window.graph.getNodeAttribute(z,"type"),m=s in Fe&&Fe[s].attrsComponent,L=(j=window.graph.getNodeAttribute(z,s))!=null?j:{},V=(v,A)=>{const W=window.graph.getNodeAttribute(v,"type");window.graph.mergeNodeAttributes(v,{[W]:A}),C(Pe()),C(ve(window.graph.export()))},w=v=>{window.open(v,"_blank")},I=v=>{f(A=>new Set(A).add(v))},g=Array.from({length:5},(v,A)=>A+1);return T.jsxs(T.Fragment,{children:[T.jsx("div",{style:{pointerEvents:"none",cursor:"not-allowed"},children:m?T.jsx(m,{id:z,attrs:L,handleAttrsUpdate:V}):T.jsx(Ke,{fontSize:"xs",m:"var(--chakra-space-1)",children:O("panel.details.unknown.error",{category:O("panel.details.unknown.node")})})}),g.filter(v=>!c.has(v)).length>0&&T.jsxs(me,{mt:4,children:[T.jsx(Ee,{as:"h5",size:"sm",children:O("panel.details.stationPhotos")}),T.jsx(me,{display:"flex",flexDirection:"column",gap:2,children:g.map(v=>!c.has(v)&&T.jsx(me,{position:"relative",cursor:"pointer",_hover:{opacity:.8},children:T.jsx(ct.LazyLoadImage,{src:"stationpics/".concat(z,"/").concat(v,".jpg"),alt:"Stationpics ".concat(v),width:"100%",height:"auto",onClick:()=>w("stationpics/".concat(z,"/").concat(v,".jpg")),onError:()=>I(v),style:{aspectRatio:"16/9",objectFit:"cover",borderRadius:"md",boxShadow:"sm"}})},v))})]})]})},vt=()=>{const{t:C}=Le(),N=Ie(),O=le.useRef(window.graph);le.useCallback(()=>{N(Pe()),N(Oe()),N(ve(O.current.export()))},[N,Pe,Oe,ve]);const{activeSubscriptions:z}=ge(w=>w.account),{selected:c,mode:f,active:s,count:{masters:m}}=ge(w=>w.runtime),[L]=c;!z.RMP_CLOUD&&m+1>et;const V=()=>N(Ne());return T.jsxs(tt,{isOpen:c.size>0&&!f.startsWith("line")&&!s,width:300,header:"Dummy header",alwaysOverlay:!0,children:[T.jsx(rt,{onClose:V,children:C("panel.details.header")}),T.jsxs(nt,{children:[c.size===1&&T.jsxs(me,{p:1,children:[T.jsx(Ee,{as:"h5",size:"sm",children:C("panel.details.specificAttrsTitle")}),window.graph.hasNode(L)&&T.jsx(ft,{})]}),c.size===1&&O.current.hasEdge(L)&&T.jsx(lt,{}),T.jsx(at,{})]})]})};export{vt as default};
